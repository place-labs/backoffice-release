function _templateObject12(){var e=_taggedTemplateLiteral([":@@driverListLoading\u241f929bfd86e4829c0b7401762d92f52536a57ca6c0\u241f4949757592530193773:Loading driver list..."]);return _templateObject12=function(){return e},e}function _templateObject11(){var e=_taggedTemplateLiteral([":@@driverListEmpty\u241f0b0bbe90203a8b9ff0681db976d02fbcd960cb85\u241f6121742772920538074:No drivers for repository"]);return _templateObject11=function(){return e},e}function _templateObject10(){var e=_taggedTemplateLiteral([":@@driverListname\u241fcff1428d10d59d14e45edec3c735a27b5482db59\u241f8953033926734869941:Name"]);return _templateObject10=function(){return e},e}function _templateObject9(){var e=_taggedTemplateLiteral([":@@repoDriverHeader\u241f0fb2961dd5d0938e459c98921d1effe1d21e759b\u241f4782277420149557084:Available Drivers"]);return _templateObject9=function(){return e},e}function _templateObject8(){var e=_taggedTemplateLiteral([":@@repoPullAction\u241f74d3b9d5b6586b4961d0bf8fa1a62047d2448e12\u241f7593000025262916359:Pull"]);return _templateObject8=function(){return e},e}function _templateObject7(){var e=_taggedTemplateLiteral([":@@descriptionLabel\u241f4a22c6843133f0b0d7dc0d28f864f2f90c1de7ad\u241f6996799422725544865:Description:"]);return _templateObject7=function(){return e},e}function _templateObject6(){var e=_taggedTemplateLiteral([":@@repoUriLabel\u241f6457460dafb273ccfbc2d68f7ec171f467c6e1c1\u241f1789506856666851299:Repository URI:"]);return _templateObject6=function(){return e},e}function _templateObject5(){var e=_taggedTemplateLiteral([":@@repoFolderNameLabel\u241f28e6abdb97b12116fa31c70e842d7b4b37e08fda\u241f8999240573830223335:Folder name:"]);return _templateObject5=function(){return e},e}function _templateObject4(){var e=_taggedTemplateLiteral([":@@driverListEmpty\u241f0077138a2d79997d18841ca13678ed218d438acb\u241f8792222300507585405:",":ICU: "]);return _templateObject4=function(){return e},e}function _templateObject3(){var e=_taggedTemplateLiteral([":\u241f6cca3b072972225f98578c9759aaf0b9ca291b24\u241f1272258481287673755:{VAR_SELECT, select, Interface {Interface Repository } Driver {Driver Repository }}"]);return _templateObject3=function(){return e},e}function _templateObject2(){var e=_taggedTemplateLiteral([":@@repoTypeLabel\u241fe78c0d60ac39787f62c9159646fe0b3c1ed55a1d\u241f2736556170366900089:Type:"]);return _templateObject2=function(){return e},e}function _templateObject(){var e=_taggedTemplateLiteral([":@@repoPullActionDetails\u241f2f16802c7d51feb9ccaba6ba8274bd1224f0cbb5\u241f1009576334696385050: Pull the latest commit for",":LINE_BREAK: this repository "]);return _templateObject=function(){return e},e}function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=_superPropBase(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"9SBB":function(e,t,n){"use strict";n.r(t);var i,r,o,a,c,s,l,d,b,u=n("ofXK"),f=n("3Pt+"),m=n("tyNb"),p=n("mrSG"),_=n("THE0"),h=n("C/ya"),g=n("g+Po"),v=n("D/9M"),O=n("fXoL"),y=n("OaWH"),w=n("0IaG"),P=n("BAfr"),C=n("m6yr"),j=n("47y3"),x=function(){return{class:"backoffice-info-with-circle"}},W=function(e){return{id:"about",name:"About",icon:e}},M=function(e){return[e]},X=function(){return{class:"backoffice-documents"}},R=function(e,t){return{id:"drivers",name:"Drivers",count:e,icon:t}},I=function(e,t){return[e,t]},D=((i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o){var a;return _classCallCheck(this,n),(a=t.call(this,e,i,r))._service=e,a._route=i,a._router=r,a._dialog=o,a.service=a._service.Repositories,a}return _createClass(n,[{key:"ngOnInit",value:function(){_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this._service.title="Repositories"}},{key:"loadValues",value:function(){var e=this;console.log("Type:",this.item.type),this.item.type===_.m.Driver?this._service.Repositories.listDrivers(this.item.id,{offset:0}).then((function(t){return e.driver_count=t.length})):this.driver_count=-1}},{key:"newItem",value:function(){var e=this;this.modal_ref||(this.modal_ref=this._dialog.open(v.a,{height:"auto",width:"auto",maxHeight:"calc(100vh - 2em)",maxWidth:"calc(100vw - 2em)",data:{item:new _.l,service:this._service.Repositories}}),this.subscription("modal_event",this.modal_ref.componentInstance.event.subscribe((function(t){"done"===t.reason&&e._router.navigate(["/repositories",t.metadata.item.id])}))),this.modal_ref.afterClosed().subscribe((function(){e.unsub("modal_events"),e.modal_ref=null})))}},{key:"editItem",value:function(){var e=this;this.item&&!this.modal_ref&&(this.modal_ref=this._dialog.open(v.a,{height:"auto",width:"auto",maxHeight:"calc(100vh - 2em)",maxWidth:"calc(100vw - 2em)",data:{item:this.item,service:this._service.Repositories}}),this.modal_ref.afterClosed().subscribe((function(){e.unsub("modal_events"),e.modal_ref=null})))}},{key:"deleteItem",value:function(){var e=this;this.item&&!this.modal_ref&&(this.modal_ref=this._dialog.open(g.b,Object.assign(Object.assign({},g.a),{data:{title:"Delete repository",content:"<p>Are you sure you want delete this repository?</p><p>Deleting this repository will <strong>immediately</strong> remove it from all associated systems and zones</p>",icon:{type:"icon",class:"backoffice-trash"}}})),this.subscription("modal_events",this.modal_ref.componentInstance.event.subscribe((function(t){return Object(p.b)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0="done"===t.reason,!e.t0){e.next=8;break}return this.modal_ref.componentInstance.loading="Deleting repository...",e.next=5,this.item.delete().catch((function(e){throw n.modal_ref.componentInstance.loading=null,n._service.notifyError("Error deleting repository. Error: ".concat(JSON.stringify(e.response||e.message||e))),e}));case 5:this._service.set("BACKOFFICE.removed",this.item.id),this._router.navigate(["/repositories"]),this.modal_ref.close();case 8:case"end":return e.stop()}}),e,this)})))}))),this.modal_ref.afterClosed().subscribe((function(){e.unsub("modal_events"),e.modal_ref=null})))}}]),n}(h.a)).\u0275fac=function(e){return new(e||i)(O.Rb(y.a),O.Rb(m.a),O.Rb(m.c),O.Rb(w.b))},i.\u0275cmp=O.Lb({type:i,selectors:[["app-repositories"]],features:[O.Ab],decls:5,vars:22,consts:[[1,"container"],[1,"sidebar"],["heading","Repositories",3,"module","close","event"],[3,"touchrelease"],["name","repository","route","repositories",3,"item","loading","tabs","event"]],template:function(e,t){1&e&&(O.Xb(0,"div",0),O.Xb(1,"div",1),O.Xb(2,"sidebar",2),O.mc("event",(function(e){return t.sidebarEvent(e)})),O.Wb(),O.Wb(),O.Xb(3,"main",3),O.mc("touchrelease",(function(){return t.show_sidebar=!1})),O.Xb(4,"item-display",4),O.mc("event",(function(e){return t.itemEvent(e)})),O.Wb(),O.Wb(),O.Wb()),2&e&&(O.Hb("show",t.show_sidebar),O.Db(2),O.wc("module",t.module)("close",t.show_sidebar),O.Db(2),O.wc("item",t.item)("loading",t.loading_item)("tabs",t.driver_count<0?O.yc(10,M,O.yc(8,W,O.xc(7,x))):O.zc(19,I,O.yc(13,W,O.xc(12,x)),O.zc(16,R,t.driver_count,O.xc(15,X)))))},directives:[P.a,C.b,j.a],styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%;width:100%}@media only screen and (orientation:portrait) and (max-width:450px){.container[_ngcontent-%COMP%]{flex-direction:column}}@media only screen and (orientation:landscape) and (max-width:800px){.container[_ngcontent-%COMP%]{flex-direction:column}}@media only screen and (orientation:portrait) and (max-width:450px){.container.show[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{height:100%}}@media only screen and (orientation:landscape) and (max-width:800px){.container.show[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{height:100%}}@media only screen and (orientation:portrait) and (max-width:450px){.container.show[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{height:0%}}@media only screen and (orientation:landscape) and (max-width:800px){.container.show[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{height:0%}}.sidebar[_ngcontent-%COMP%]{height:100%;width:20em}@media only screen and (orientation:portrait) and (max-width:450px){.sidebar[_ngcontent-%COMP%]{height:3em;min-height:3em;width:100%;transition:height .3s}}@media only screen and (orientation:landscape) and (max-width:800px){.sidebar[_ngcontent-%COMP%]{height:3em;min-height:3em;width:100%;transition:height .3s}}main[_ngcontent-%COMP%]{position:relative;height:100%;overflow:hidden;flex:1;background-color:#f0f0f0}@media only screen and (orientation:portrait) and (max-width:450px){main[_ngcontent-%COMP%]{transition:height .3s;width:100%}}@media only screen and (orientation:landscape) and (max-width:800px){main[_ngcontent-%COMP%]{transition:height .3s;width:100%}}"]}),i),L=n("5f3J"),E=n("Wp6s"),k=n("bTqV"),T=n("Xa2L"),z=n("q/DJ");function S(e,t){1&e&&(O.Vb(0),O.bc(1,b),O.Ub())}function A(e,t){if(1&e){var n=O.Yb();O.Xb(0,"div",2),O.Xb(1,"section",3),O.Xb(2,"mat-card"),O.Xb(3,"mat-card-content"),O.hc(4,r),O.Sb(5,"br"),O.ec(),O.Wb(),O.Xb(6,"mat-card-actions"),O.Xb(7,"button",4),O.mc("tapped",(function(){return O.Hc(n),O.qc().pullLatestCommit()})),O.Pc(8,S,2,0,"ng-container",5),O.Wb(),O.Wb(),O.Wb(),O.Wb(),O.Xb(9,"section",6),O.Xb(10,"div",7),O.Xb(11,"label"),O.bc(12,o),O.Wb(),O.Xb(13,"div",8),O.bc(14,c),O.Wb(),O.Wb(),O.Xb(15,"div",7),O.Xb(16,"label"),O.bc(17,s),O.Wb(),O.Xb(18,"div",8),O.Rc(19),O.Wb(),O.Wb(),O.Xb(20,"div",7),O.Xb(21,"label"),O.bc(22,l),O.Wb(),O.Xb(23,"div",8),O.Xb(24,"a",9),O.rc(25,"safe"),O.Rc(26),O.Wb(),O.Wb(),O.Wb(),O.Xb(27,"div",7),O.Xb(28,"label"),O.bc(29,d),O.Wb(),O.Xb(30,"div",8),O.Rc(31),O.Wb(),O.Wb(),O.Wb(),O.Wb()}if(2&e){var i=O.qc(),a=O.Ec(2);O.Db(7),O.wc("disabled",i.pulling),O.Db(1),O.wc("ngIf",!i.pulling)("ngIfElse",a),O.Db(6),O.fc(i.item.type),O.cc(14),O.Db(5),O.Sc(i.item.folder_name||"No folder set"),O.Db(5),O.wc("href",O.tc(25,8,i.item.uri,"url"),O.Kc),O.Db(2),O.Sc(i.item.uri||"No URI set"),O.Db(5),O.Sc(i.item.description||"No description")}}function $(e,t){1&e&&(O.Xb(0,"div",10),O.Sb(1,"mat-spinner",11),O.Wb())}r=$localize(_templateObject(),"\ufffd#5\ufffd\ufffd/#5\ufffd"),o=$localize(_templateObject2()),a=$localize(_templateObject3()),a=O.gc(a,{VAR_SELECT:"\ufffd0\ufffd"}),c=$localize(_templateObject4(),a),s=$localize(_templateObject5()),l=$localize(_templateObject6()),d=$localize(_templateObject7()),b=$localize(_templateObject8());var N,F,H,B=((N=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this))._service=e,i}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this.subscription("item",this._service.listen("BACKOFFICE.active_item").subscribe((function(t){e.item=t})))}},{key:"pullLatestCommit",value:function(){var e=this;this.pulling=!0,this._service.Repositories.pullCommit(this.item.id).then((function(){return e.pulling=!1}),(function(t){e.pulling=!1,e._service.notifyError("Error pulling latest commit. Error: ".concat(JSON.stringify(t.response||t.message||t)))}))}}]),n}(L.a)).\u0275fac=function(e){return new(e||N)(O.Rb(y.a))},N.\u0275cmp=O.Lb({type:N,selectors:[["repository-about"]],inputs:{item:"item"},features:[O.Ab],decls:3,vars:1,consts:[["class","container",4,"ngIf"],["spinner",""],[1,"container"],[1,"actions"],["mat-button","",3,"disabled","tapped"],[4,"ngIf","ngIfElse"],[1,"details"],[1,"field"],[1,"value"],[3,"href"],[1,"spinner"],["diameter","32"]],template:function(e,t){1&e&&(O.Pc(0,A,32,11,"div",0),O.Pc(1,$,2,0,"ng-template",null,1,O.Qc)),2&e&&O.wc("ngIf",t.item)},directives:[u.m,E.a,E.c,E.b,k.b,C.b,T.b],pipes:[z.b],styles:[".container[_ngcontent-%COMP%]{padding:1em}header[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:700;font-size:1.1em}section[_ngcontent-%COMP%]{padding:.5em .25em}.no-item[_ngcontent-%COMP%]{font-size:.75em}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:.75em 0}label[_ngcontent-%COMP%]{font-size:.8em;font-weight:500;margin-bottom:.4em}.actions[_ngcontent-%COMP%]{padding:.5em;display:flex;flex-wrap:wrap}button[_ngcontent-%COMP%]{min-width:10em;margin:.25em}.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;margin:.25em 0}mat-card[_ngcontent-%COMP%]{margin:.5em;text-align:center}"]}),N),q=n("0njA"),K=n("ARKa");F=$localize(_templateObject9()),H=$localize(_templateObject10());var J,U,V=function(){return{class:"material-icons",content:"add"}};function G(e,t){if(1&e){var n=O.Yb();O.Xb(0,"tr"),O.Sb(1,"td",9),O.rc(2,"driverFormat"),O.Xb(3,"td",10),O.Xb(4,"button",11),O.mc("tapped",(function(){O.Hc(n);var e=t.$implicit;return O.qc(4).newDriver(e)})),O.Sb(5,"app-icon",12),O.Wb(),O.Wb(),O.Wb()}if(2&e){var i=t.$implicit;O.Db(1),O.wc("innerHTML",O.sc(2,2,i),O.Ic),O.Db(4),O.wc("icon",O.xc(4,V))}}function Q(e,t){if(1&e&&(O.Xb(0,"table"),O.Xb(1,"thead"),O.Xb(2,"td",7),O.bc(3,H),O.Wb(),O.Sb(4,"td"),O.Wb(),O.Xb(5,"tbody"),O.Pc(6,G,6,5,"tr",8),O.Wb(),O.Wb()),2&e){var n=O.qc(3);O.Db(6),O.wc("ngForOf",n.driver_list)}}function Y(e,t){1&e&&(O.Xb(0,"div",13),O.Xb(1,"div",14),O.bc(2,J),O.Wb(),O.Wb())}function Z(e,t){if(1&e&&(O.Xb(0,"div",4),O.Pc(1,Q,7,1,"table",5),O.Pc(2,Y,3,0,"div",6),O.Wb()),2&e){var n=O.qc(2);O.Db(1),O.wc("ngIf",n.driver_list&&n.driver_list.length>0),O.Db(1),O.wc("ngIf",!n.driver_list||n.driver_list.length<=0)}}function ee(e,t){if(1&e&&(O.Xb(0,"div",2),O.Xb(1,"h3"),O.bc(2,F),O.Wb(),O.Pc(3,Z,3,2,"div",3),O.Wb()),2&e){var n=O.qc(),i=O.Ec(2);O.Db(3),O.wc("ngIf",!n.loading)("ngIfElse",i)}}function te(e,t){1&e&&(O.Xb(0,"div",15),O.Xb(1,"div",16),O.Sb(2,"mat-spinner",17),O.Wb(),O.Xb(3,"div",14),O.bc(4,U),O.Wb(),O.Wb())}J=$localize(_templateObject11()),U=$localize(_templateObject12());var ne,ie=[{path:":id",component:D,children:[{path:"about",component:B},{path:"drivers",component:(ne=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this))._service=e,r._dialog=i,r.driver_list=[],r}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this.subscription("item",this._service.listen("BACKOFFICE.active_item").subscribe((function(t){e.item=t,e.load()})))}},{key:"ngOnChanges",value:function(e){e.item&&this.load()}},{key:"load",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.item&&(this.loading=!0,this._service.Repositories.listDrivers(this.item.id,{offset:t}).then((function(t){e.loading=!1,e.driver_list=t||[]}),(function(){return e.loading=!1})))}},{key:"newDriver",value:function(e){this.item.id&&this._dialog.open(v.a,{height:"auto",width:"auto",maxHeight:"calc(100vh - 2em)",maxWidth:"calc(100vw - 2em)",data:{item:new _.g({name:"",module_name:"",repository_id:this.item.id,file_name:e}),service:this._service.Drivers}})}}]),n}(L.a),ne.\u0275fac=function(e){return new(e||ne)(O.Rb(y.a),O.Rb(w.b))},ne.\u0275cmp=O.Lb({type:ne,selectors:[["repository-drivers"]],inputs:{item:"item"},features:[O.Ab,O.Bb],decls:3,vars:1,consts:[["class","container",4,"ngIf"],["load_state",""],[1,"container"],["class","settings",4,"ngIf","ngIfElse"],[1,"settings"],[4,"ngIf"],["class","info-block",4,"ngIf"],[1,"flex"],[4,"ngFor","ngForOf"],[3,"innerHTML"],[1,"small"],["mat-icon-button","",3,"tapped"],[3,"icon"],[1,"info-block"],[1,"text"],[1,"info-block","center"],[1,"icon"],["diameter","48"]],template:function(e,t){1&e&&(O.Pc(0,ee,4,2,"div",0),O.Pc(1,te,5,0,"ng-template",null,1,O.Qc)),2&e&&O.wc("ngIf",t.item)},directives:[u.m,u.l,k.b,C.b,q.a,T.b],pipes:[K.a],styles:[".container[_ngcontent-%COMP%]{padding:1em}.list[_ngcontent-%COMP%]{margin-top:.5em}tbody[_ngcontent-%COMP%]{font-size:.9em}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap}.small[_ngcontent-%COMP%]{width:2em}div[_ngcontent-%COMP%]   .duo[_ngcontent-%COMP%]{width:4em}div[_ngcontent-%COMP%]   .duo[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{display:inline-flex}.select[_ngcontent-%COMP%]{display:flex;align-items:center}.select[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}"]}),ne)},{path:"**",redirectTo:"about"}]},{path:"**",redirectTo:"-"}],re=n("PCNd");n.d(t,"AppRepositoriesModule",(function(){return ae}));var oe,ae=((oe=function e(){_classCallCheck(this,e)}).\u0275mod=O.Pb({type:oe}),oe.\u0275inj=O.Ob({factory:function(e){return new(e||oe)},imports:[[u.c,f.g,m.g.forChild(ie),re.a]]}),oe)}}]);